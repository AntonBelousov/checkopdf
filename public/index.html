<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="GitLab Pages">
    <title>Plain HTML site using GitLab Pages</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="navbar">
      <a href="https://pages.gitlab.io/plain-html/">Plain HTML Example</a>
      <a href="https://gitlab.com/pages/plain-html/">Repository</a>
      <a href="https://gitlab.com/pages/">Other Examples</a>
    </div>

<button onclick="getData()">kjhklj</button>
    <form>
      
    </form>
    <p id="durl">
      This is a simple plain-HTML website on GitLab Pages, without any fancy static site generator.
    </p>
    <div id="resultList">
    </div>

<!-- <script defer src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script> -->
<script>
 // const APIKey = "sYoECmKTCXlTF19D";
   const APIKey = 'AiBEDldGmvLAzdp3';
const APIRoot = `https://api.checko.ru/v2/search?key=` + APIKey
//const url = 'https://corsproxy.io/?' + encodeURIComponent(APIRoot + `by=name&obj=org&query=ростелеком`);
const durl = 'https://corsproxy.io/?' + encodeURIComponent(APIRoot + '&by=name&obj=org&query=ростелеком');

  const headers = {
        'Content-Type': 'application/json'
    };

//axios.get(url, {mode: 'no-cors'})
function getData(){
document.getElementById('durl').innerHTML = durl;
fetch(durl, {mode: 'no-cors'})
        .then(function (response) {
          document.getElementById('resultList').innerHTML = response.data;
          console.log(response);
        })
        .catch(function (err) {
          document.getElementById('resultList').innerHTML = err.message;
        });

}
//async function fetchMoviesBadStatus() {
 
//  const response = await fetch(APIRoot + 'by=name&obj=org&query=ростелеком', {
//      method: 'GET',
//      mode: 'no-cors',
//      headers: {
//        'Content-Type': 'application/json',
//      },
//  });
//  if (!response.ok) {  
//    const message = `An error has occured: ${response.status}`;
//    throw new Error(message);
//  }
//   console.log('werwerer');
//  const movies = await response.json();
    
//  console.log(movies);
//  return movies;
//}

//function getData(){
//  console.log('adfasdf');
//fetchMoviesBadStatus().catch(error => {
//  error.message; // 'An error has occurred: 404'
//});
//}
</script>

</body>
</html>

